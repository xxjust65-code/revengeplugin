(function(l,r,d,u,n,o,E,i){"use strict";const{View:S,ScrollView:f,Text:T,TouchableOpacity:B}=r.ReactNative,{clipboard:C}=r,{storage:g}=o,{Forms:F}=i,{showToast:h}=i.toasts,{semanticColors:c}=i,{getAssetIDByName:a}=i.assets,{findByStoreName:m}=u;g.targetUserId??="",g.fromUserId??="",g.messageContent??="",g.embedEnabled??=!1,g.embedTitle??="",g.embedDescription??="",g.embedImageUrl??="";const p=m("MessageStore"),v=m("ChannelStore"),y=m("UserStore");function w(e,t,s,n){const o=y.getUser(t),i=(new Date).toISOString(),d="fake-"+Date.now()+"-"+Math.random().toString(36).substr(2,9);return{id:d,channel_id:e,author:o||{id:t,username:"Unknown User",discriminator:"0000",avatar:null,bot:!1},content:s,timestamp:i,edited_timestamp:null,tts:!1,mention_everyone:!1,mentions:[],mention_roles:[],attachments:[],embeds:n?[n]:[],reactions:[],pinned:!1,type:0,flags:0,_fake:!0}}function k(e,t,s,n){try{const o=w(e,t,s,n);return r.FluxDispatcher&&r.FluxDispatcher.dispatch({type:"MESSAGE_CREATE",channelId:e,message:o,optimistic:!1}),!0}catch(e){return console.error("Error injecting fake message:",e),!1}}function M(e){try{const t=v.getSortedPrivateChannels().find((function(t){return 1===t.type&&t.recipients&&t.recipients.includes(e)}));return t?t.id:null}catch(e){return console.error("Error getting DM channel:",e),null}}function x(){const[e,t]=r.React.useState(g.targetUserId||""),[s,n]=r.React.useState(g.fromUserId||""),[o,u]=r.React.useState(g.messageContent||""),[m,p]=r.React.useState(g.embedEnabled||!1),[v,w]=r.React.useState(g.embedTitle||""),[x,I]=r.React.useState(g.embedDescription||""),[U,D]=r.React.useState(g.embedImageUrl||"");r.React.useEffect((function(){g.targetUserId=e}),[e]),r.React.useEffect((function(){g.fromUserId=s}),[s]),r.React.useEffect((function(){g.messageContent=o}),[o]),r.React.useEffect((function(){g.embedEnabled=m}),[m]),r.React.useEffect((function(){g.embedTitle=v}),[v]),r.React.useEffect((function(){g.embedDescription=x}),[x]),r.React.useEffect((function(){g.embedImageUrl=U}),[U]);const R=function(){C.getString().then((function(e){e&&(t(e.trim()),h("Pasted Target User ID",a("toast_copy_link")))})).catch((function(){h("Failed to paste",a("Small"))}))},A=function(){C.getString().then((function(e){e&&(n(e.trim()),h("Pasted Sender User ID",a("toast_copy_link")))})).catch((function(){h("Failed to paste",a("Small"))}))},N=function(){if(!e||!s||!o)return void h("Please fill in all required fields",a("ic_close_16px"));const t=M(e);if(!t)return void h("Could not find DM channel. Try opening a DM with this user first.",a("ic_close_16px"));let n=null;m&&(v||x||U)&&(n={type:"rich",title:v||void 0,description:x||void 0,image:U?{url:U}:void 0,color:5793266}),k(t,s,o,n)?h("‚úÖ Fake message sent!",a("toast_image_saved")):h("Failed to send fake message",a("ic_close_16px"))},j=function(){const e=y.getCurrentUser()?.id;e?(t(e),n(e),u("This is a test message!"),h("Test values filled in",a("toast_image_saved"))):h("Could not get current user",a("ic_close_16px"))};return r.React.createElement(f,{style:{flex:1,backgroundColor:c.BACKGROUND_MOBILE_PRIMARY}},r.React.createElement(F.FormSection,{title:"MESSAGE FAKER"},r.React.createElement(F.FormRow,{label:"Inject fake messages into DMs from anyone.",leading:r.React.createElement(F.FormRow.Icon,{source:a("ic_message_edit")})})),r.React.createElement(F.FormDivider,null),r.React.createElement(F.FormSection,{title:"CREATE FAKE MESSAGE"},r.React.createElement(F.FormRow,{label:"Create a fake message in someone's DM",leading:r.React.createElement(F.FormRow.Icon,{source:a("ic_edit_24px")})})),r.React.createElement(F.FormDivider,null),r.React.createElement(F.FormSection,{title:"TARGET USER ID (Whose DM)"},r.React.createElement(F.FormText,{style:{color:c.TEXT_MUTED,marginBottom:10}},"User ID of person whose DM you want to inject into"),r.React.createElement(F.FormInput,{value:e,onChange:t,placeholder:"Enter target user ID",title:"Target User ID"}),r.React.createElement(B,{style:{backgroundColor:"#5865F2",padding:15,borderRadius:8,marginTop:10,marginHorizontal:15,flexDirection:"row",alignItems:"center",justifyContent:"center"},onPress:R},r.React.createElement(T,{style:{color:"white",fontSize:16,fontWeight:"600"}},"üìã Paste Target User ID"))),r.React.createElement(F.FormDivider,null),r.React.createElement(F.FormSection,{title:"FROM USER ID (Who message is from)"},r.React.createElement(F.FormText,{style:{color:c.TEXT_MUTED,marginBottom:10}},"User ID of who the message appears to be from"),r.React.createElement(F.FormInput,{value:s,onChange:n,placeholder:"Enter sender user ID",title:"From User ID"}),r.React.createElement(B,{style:{backgroundColor:"#5865F2",padding:15,borderRadius:8,marginTop:10,marginHorizontal:15,flexDirection:"row",alignItems:"center",justifyContent:"center"},onPress:A},r.React.createElement(T,{style:{color:"white",fontSize:16,fontWeight:"600"}},"üìã Paste Sender User ID"))),r.React.createElement(F.FormDivider,null),r.React.createElement(F.FormSection,{title:"MESSAGE CONTENT"},r.React.createElement(F.FormText,{style:{color:c.TEXT_MUTED,marginBottom:10}},"The message text"),r.React.createElement(F.FormInput,{value:o,onChange:u,placeholder:"Enter message content",title:"Message Content"})),r.React.createElement(F.FormDivider,null),r.React.createElement(F.FormSwitchRow,{label:"Optional: Add an embed",leading:r.React.createElement(F.FormRow.Icon,{source:a("ic_link")}),value:m,onValueChange:p}),r.React.createElement(F.FormDivider,null),m?r.React.createElement(r.React.Fragment,null,r.React.createElement(F.FormSection,{title:"EMBED TITLE"},r.React.createElement(F.FormText,{style:{color:c.TEXT_MUTED,marginBottom:10}},"Optional embed title"),r.React.createElement(F.FormInput,{value:v,onChange:w,placeholder:"Optional embed title",title:"Embed Title"})),r.React.createElement(F.FormDivider,null),r.React.createElement(F.FormSection,{title:"EMBED DESCRIPTION"},r.React.createElement(F.FormText,{style:{color:c.TEXT_MUTED,marginBottom:10}},"Optional embed description"),r.React.createElement(F.FormInput,{value:x,onChange:I,placeholder:"Optional embed description",title:"Embed Description"})),r.React.createElement(F.FormDivider,null),r.React.createElement(F.FormSection,{title:"EMBED IMAGE URL"},r.React.createElement(F.FormText,{style:{color:c.TEXT_MUTED,marginBottom:10}},"Optional image URL"),r.React.createElement(F.FormInput,{value:U,onChange:D,placeholder:"Optional image URL",title:"Embed Image URL"})),r.React.createElement(F.FormDivider,null)):null,r.React.createElement(S,{style:{padding:15}},r.React.createElement(B,{style:{backgroundColor:"#3BA55D",padding:15,borderRadius:8,marginBottom:10,flexDirection:"row",alignItems:"center",justifyContent:"center"},onPress:N},r.React.createElement(T,{style:{color:"white",fontSize:16,fontWeight:"600"}},"üìß Send Fake Message")),r.React.createElement(B,{style:{backgroundColor:"#F26522",padding:15,borderRadius:8,flexDirection:"row",alignItems:"center",justifyContent:"center"},onPress:j},r.React.createElement(T,{style:{color:"white",fontSize:16,fontWeight:"600"}},"‚úèÔ∏è Quick Test Message"))),r.React.createElement(F.FormDivider,null),r.React.createElement(F.FormSection,{title:"CONSOLE API"},r.React.createElement(F.FormText,{style:{color:c.TEXT_MUTED,marginBottom:10}},"You can also use the console for advanced usage")),r.React.createElement(S,{style:{height:50}}))}var z={onLoad:function(){console.log("[MessageFaker] Plugin loaded!")},onUnload:function(){console.log("[MessageFaker] Plugin unloaded!")},settings:x};return l.default=z,Object.defineProperty(l,"__esModule",{value:!0}),l})({},vendetta.metro.common,vendetta.patcher,vendetta.metro,vendetta,vendetta.plugin,vendetta.storage,vendetta.ui.components);
